version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
  
intents:
- affirm
- thanks
- comentarios
- consejo_de_barrio
- debate
- demo
- deny
- discoverability
- encuentros
- farewell
- give_neighborhood
- greet
- iniciativas_ciudadanas
- organos_de_participacion
- presupuesto
- procesos_participativos
- propuestas
- quien_eres
- whereami
- retrieve_proceso_participativo
- debate_in_participatory_process
- meeting_in_participatory_process
- proposals_in_participatory_process
- budgets_in_participatory_process
- inciate_conv
- give_name
- quien_puede_participar
- como_puedo_participar
- decidim
- change_context
- discoverability_conceptos
- discoverability_extended
- signIn
- sumarization_debates
- resolve_mention
- ordenar_propuestas
- propuestas_amigos

entities:
- neighborhood_location
- user_name
- context
- user_logged
- mention
- actual_slug_PP
- link:
    influence_conversation: false

slots:

  neighborhood_location:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: neighborhood_location

  context:
    type: categorical
    values:
      - LISTADO PROCESOS
      - PROCESO 
      - PROCESO ENCUENTROS
      - PROCESO PROPUESTAS
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: context

  actual_slug_PP:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: actual_slug_PP

  list_offered:
    type: list
    influence_conversation: false
    mappings:
     - type: custom

  # interest:
  #   type: list
  #   influence_conversation: false
  #   mappings:
  #    - type: custom

  user_name:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: user_name

  user_logged:
    type: categorical
    values:
      - LOGGED
      - NOT_LOGGED
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: user_logged

  state_context:
    type: any
    initial_value: {"LISTADO PROCESOS": True, "PROCESO": True, "PROCESO ENCUENTROS": True, "PROCESO PROPUESTAS": True}
    mappings:
    - type: custom
responses:
  utter_greet:
  - text: Hola, como puedo ayudarte?
  - text: Hola, en que puedo ayudarte?
  - text: Hola!
  - text: Holaa!
  utter_farewell:
  - text: Adeu!
  - text: Adios! Hasta la proxima!
  - text: Genial. Cualquier cosa estoy por aquí!
  - text: Nos vemoos! No dudes en preguntarme.
  utter_yourwelcome:
  - text: De nada!
  - text: No hay problema!

  utter_inform:
  - text: |
      Esta es la página oficial de Decidim Barcelona, en ella podrás ver los diferentes procesos que se están llevando a cabo, participar en diferentes debates, ver presupuestos... 
      
      Te aconsejo que te registres antes de nada.       
  utter_quien_eres:
  - text: Me llamo Sara, soy una IA a tu servicio. Te ayudaré en lo que necesites en Decidim Barcelona. 

  utter_greet_and_ask_name:
  - text: |
     Hola, Soy Sara, el chatbot de Decidim BCN. Estoy aquí para ayudarte en el ámbito de los procesos participativos. 

     ¿Comó te llamas?
  utter_welcome_back:
  - text: "Hola de nuevo! {user_name}"


  utter_wait:
  - text: Por favor espere un segundo
  - text: Un momento, por favor
  - text: Claro, un segundo
  - text: Claro, un momento

  utter_give_link:
  - text: 'Si te interesa aquí tienes el enlace: {link}'
  - text: 'Aquí tienes el enlace: {link}'

  utter_signIn:
# TODO: AÑADIR FOTO PARA INDICAR DONDE ESTÁN LOS BOTONES
  - text: |
     Para registrarte o iniciar sesión haz click en sus respectivos botones en la parte superior de la web
     
     Posteriormente rellena los datos que te pidan. Te aconsejo iniciar sesión con Google, es más rápido y cómodo
    # image: "C:\Users\vicll\OneDrive\Escritorio\UNI 2022-2023\TFG\PROYECTOS\project\img\SignIn.png"
    image: "/static/SignIn.png"
  utter_decidim:
  - text: Decidim es la plataforma digital de participación del Ayuntamiento de Barcelona para construir una ciudad más democrática. Un espacio para construir una ciudad con el protagonismo de quien la habita.
    
  utter_procesos_participativos:
  - text: Los procesos participativos son una serie de *encuentros* delimitados en un tiempo concreto para promover el debate y el contraste de argumentos.
    buttons:
    - title: Qué es un encuentro
      payload: /encuentros
  utter_organos_de_participacion:
  - text: Los órganos de participación son grupos de personas que se reúnen con el fin de *debatir* y recoger *propuestas* en torno a *procesos participativos*, 
    buttons:
    - title: Qué son los procesos participativos
      payload: /procesos_participativos
    - title: Qué es un debate
      payload: /debate
    - title: Qué son las propuestas
      payload: /propuestas
  utter_iniciativas_ciudadanas:
  - text: Las iniciativas ciudadanas es el medio que tiene la ciudadanía para promover a través de la recogida de firmas, que el Ayuntamiento lleve a cabo una determinada acción de interés colectivo.
  utter_debate:
  - text: Un debate es un espacio digital para informarte y decidir sobre las *propuestas* de cada *proceso participativo*.
    buttons:
    - title: Qué son las propuestas
      payload: /propuestas
    - title: Qué son los procesos participativos
      payload: /procesos_participativos
  utter_encuentros:
  - text: Los encuentros son reuniones presenciales relacionadas con los *procesos participativos* y de donde surgen *propuestas*.
    buttons:
    - title: Qué son los procesos participativos
      payload: /procesos_participativos
    - title: Qué son las propuestas
      payload: /propuestas
  utter_propuestas:
  - text: Las propuestas son contribuciones de los participantes que pueden recibir el apoyo de los usuarios, los cuales pueden votar sobre ella
  utter_presupuesto:
  - text: Un presupuesto es un cálculo anticipado del coste de una obra o un servicio.
  utter_consejo_de_barrio:
  - text: Los consejos de barrio son *órganos para la participación* de los vecinos delimitados según los barrios.
    buttons:
    - title: Qué son los órganos de participación
      payload: /organos_de_participacion
  utter_comentarios:
  - text: Los comentarios son contribuciones de los usuarios al hilo de una *propuesta* o *debate* y que pueden recibir una votación negativa o positiva.
    buttons:
    - title: Qué son las propuestas
      payload: /propuestas
    - title: Qué es un debate
      payload: /debate


  utter_quien_puede_participar:
  - text: "Cualquier usuario registrado sin necesidad de estar empadronado puede participar en los debates presenciales, y también es posible lanzar una propuesta o comentar las propuestas existentes a la plataforma. Solamente apoyar o votar en una propuesta se limita a la gente empadronada"
  utter_como_puedo_participar:
  - text: "Regístrate para seguir los procesos participativos, para añadir propuestas, compartir ideas en los debates o hacer comentarios. Si eres un ciudadano de Barcelona empadronado podrás, además, apoyar las propuestas."


  utter_remember_location:
  - text: "Recordaré ese barrio"
    condition:
        - type: slot
          name: neighborhood_location       
  - text: Recordaré eso


  utter_discoverability:
    - condition:
        - type: slot
          name: user_name
          value: null
      buttons:
      - title: "¿Qué es decidim?"
        payload: /decidim
      - title: "¿Quién puede participar en los procesos participativos?"
        payload: /quien_puede_participar
      - title: "¿Cómo se participa?"
        payload: /como_puedo_participar
      - title: "Otros.."
        payload: /discoverability_extended
      text: "Hola, puedes preguntarme, entre otras cosas sobre:"
      
    - text: "Hola {user_name}, puedes preguntarme, entre otras cosas sobre:"
      buttons:
      - title: "¿Qué es decidim?"
        payload: /decidim
      - title: "¿Quién puede participar en los procesos participativos?"
        payload: /quien_puede_participar
      - title: "¿Cómo se participa?"
        payload: /como_puedo_participar
      - title: "Otros.."
        payload: /discoverability_extended

      # buttons:
      #   - payload: /affirm
      #     title: Yes
      #   - payload: /deny
      #     title: No
      # text: would you like to provide name and other details.   
  # - condition:
  #     - type: slot
  #       name: user_name
  #       value: null
  #   text: "Hola sinnombre"
  # - text: "Hola {user_name}"
  
  # - text: "Hola {user_name}, puedes preguntarme, entre otras cosas sobre:"
  #   buttons:
  #   - title: "¿Qué es decidim?"
  #     payload: /decidim
  #   - title: "¿Quién puede participar en los procesos participativos?"
  #     payload: /quien_puede_participar
  #   - title: "¿Cómo se participa?"
  #     payload: /como_puedo_participar
  #   - title: "Otros.."
  #     payload: /discoverability_extended


  utter_discoverability_extended:
  - text: "También puedes preguntarme sobre:"
    buttons:
    - title: "Conceptos de decidim"
      payload: /discoverability_conceptos
    - title: "¿Cómo me registro?"
      payload: /signIn

  utter_discoverability_conceptos:
  - text: |
      Estos son algunos de los conceptos que tal vez no entiendas
      
      Pero puedes preguntarme cualquier otro que veas en decidim:
    buttons:
    - title: "Organos de Participacion"
      payload: /organos_de_participacion
    - title: "Iniciativas Ciudadanas"
      payload: /iniciativas_ciudadanas 
    - title: "Consejo de Barrio"
      payload: /consejo_de_barrio  


  utter_offer_proceso_participativo:
  - text: Quieres que te busque algún proceso participativo de ejemplo?
    buttons:
    - title: "Si"
      payload: /affirm
    - title: "No"
      payload: /deny
      
  utter_suggest_location:
  - text: |
      También me puedes pedir procesos de un lugar en concreto. O dime que barrio te interesa e intentaré buscar para la próxima.
      
      Estos son algunos disponibles:
    buttons:
    - title: "Sants"
      payload: '/give_neighborhood{{"neighborhood_location":"Sants"}}'
    - title: "Horta"
      payload: '/give_neighborhood{{"neighborhood_location":"Horta"}}'
    - title: "Guinardó"
      payload: '/give_neighborhood{{"neighborhood_location":"Guinardó"}}'
    - title: "Nou Barris"
      payload: '/give_neighborhood{{"neighborhood_location":"Nou Barris"}}'
  
  utter_change_page:
  - condition:
      - type: slot
        name: context
        value: LISTADO PROCESOS
    text: "Desde aquí podrás ver todos los procesos que existen. ¡Te animo a que cliques en alguno!"
  - condition:
      - type: slot
        name: context
        value: PROCESO
    text: |
     Esta es la página principal de este proceso. Desde aquí puedes ver de qué trata el proceso y en que fase se encuentra. Si quieres más información de las fases clica en 'Ver las fases'

     Algunos procesos tienen *encuentros*, *debates*, *propuestas*, y más. ¡Te animo a clicar en ellos!
  - condition:
      - type: slot
        name: context
        value: PROCESO ENCUENTROS
    text: "Estás en la página de encuentros de este proyecto. Desde aquí puedes ver los encuentros presenciales que hay disponibles. Desde el mapa podrás ver su localización. "
  - condition:
      - type: slot
        name: context
        value: PROCESO PROPUESTAS
    text: "Estás en la página de propuestas de este proyecto. Desde aquí puedes ver las diferentes propuestas que hay disponibles. Te animo a seguir alguna."



  utter_control_flow_proposals:
  - text: |
      Puedo ordenar o escoger según tu circulo de amistad.
      
      Estas son las opciones disponibles:
    buttons:
    - title: "Ordenar"
      payload: '/ordenar_propuestas'
    - title: "Amistad"
      payload: '/propuestas_amigos'





  utter_default:
  - text: "Lo siento. No te he entendido.. Intenta reformular la frase. También puedes visitar el link https://www.decidim.barcelona/pages?locale=es"
  utter_ask_rephrase:
  - text: "No te he entendido, por favor vuelve a escribir la frase de otra forma"


actions:
- '...'
- utter_farewell
- utter_greet
- utter_inform
- action_validar_neighbor
- action_procesos_participativos
- action_mirar_en_proceso_participativo
- utter_greet_and_ask_name
- action_show_context_and_id
- action_offer_sumarization_debates
- action_sumarization
- action_last_3_proposals
- action_control_flow_proposals
- action_propuestas_amigos