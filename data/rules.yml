version: '3.1'

rules:
 - rule: NLU FALLBACK
   steps:
   - intent: nlu_fallback
   - action: action_two_stage_fallback
   - active_loop: action_two_stage_fallback





 - rule: show context and id
   condition:
   - slot_was_set:
     - user_logged: "NOT_LOGGED"
   steps:
   - intent: change_context
   - action: action_show_context_and_id

 - rule: no hacer nada
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "LISTADO PROCESOS"
   steps:
   - intent: change_context
   - action: action_offer_pp_tematica
  #  wait_for_user_input: true

 - rule: no hacer nada 2
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "PROCESO"
   steps:
   - intent: change_context
   - action: action_listen
   wait_for_user_input: true






 - rule: ofrecer propuestas
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "PROCESO PROPUESTAS"
   steps:
   - intent: change_context
   - action: action_control_flow_proposals
  #  - action: action_last_3_proposals
  #  wait_for_user_input: false

 - rule: ordenar propuestas
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "PROCESO PROPUESTAS"
   steps:
    - action: action_control_flow_proposals
    - intent: ordenar_propuestas
    - action: action_last_3_proposals
    
 - rule: ofrecer propuestas de amigos
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "PROCESO PROPUESTAS"
   steps:
    - action: action_control_flow_proposals
    - intent: propuestas_amigos
    - action: action_propuestas_amigos






 - rule: ofrecer resumen
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "PROCESO ENCUENTROS"
   steps:
   - intent: change_context
   - action: action_offer_sumarization_debates
   wait_for_user_input: false

 - rule: ofrecer resumen 2
   condition:
   - slot_was_set:
     - user_logged: "LOGGED"
   - slot_was_set:
     - context: "PROCESO ENCUENTROS"
   steps:
   - intent: sumarization_debates
   - action: action_offer_sumarization_debates
   wait_for_user_input: false

# probar a poner varias rules con condition user logged y context = X
 - rule: hacer resumen
   steps:
    - action: action_offer_sumarization_debates
    - intent: resolve_mention
    - action: action_sumarization






 - rule: welcome
   steps:
   - intent: greet
   - action: utter_greet

 - rule: farewell
   steps:
   - intent: farewell
   - action: utter_farewell

 - rule: thank u
   steps:
   - intent: thanks
   - action: utter_yourwelcome






 - rule: the user doesnt know what to do
   steps:
   - intent: whereami
   - action: action_show_context_and_id

 - rule: quien eres
   steps:
   - intent: quien_eres
   - action: utter_quien_eres
 
 - rule: discoverability
   steps:
   - intent: discoverability
   - action: utter_discoverability
   
 - rule: discoverability Extended
   steps:
   - intent: discoverability_extended
   - action: utter_discoverability_extended

 - rule: discoverability Conceptos
   steps:
   - intent: discoverability_conceptos
   - action: utter_discoverability_conceptos

 - rule: discoverability signIn
   steps:
   - intent: signIn
   - action: utter_signIn

 - rule: quien_puede_participar
   steps:
   - intent: quien_puede_participar
   - action: utter_quien_puede_participar
   - action: utter_offer_proceso_participativo

 - rule: como_puedo_participar
   steps:
   - intent: como_puedo_participar
   - action: utter_como_puedo_participar
   - action: utter_offer_proceso_participativo






 - rule: define_comentarios
   steps: 
   - intent: comentarios
   - action: utter_comentarios

 - rule: define_consejo_de_barrio
   steps: 
   - intent: consejo_de_barrio
   - action: utter_consejo_de_barrio

 - rule: define_presupuesto
   steps: 
   - intent: presupuesto
   - action: utter_presupuesto

 - rule: define_propuestas
   steps: 
   - intent: propuestas
   - action: utter_propuestas

 - rule: define_encuentros
   steps: 
   - intent: encuentros
   - action: utter_encuentros

 - rule: define_debate
   steps: 
   - intent: debate
   - action: utter_debate

 - rule: define_iniciativas_ciudadanas
   steps: 
   - intent: iniciativas_ciudadanas
   - action: utter_iniciativas_ciudadanas

 - rule: define_organos_de_participacion
   steps: 
   - intent: organos_de_participacion
   - action: utter_organos_de_participacion

 - rule: define_procesos_participativos
   steps: 
   - intent: procesos_participativos
   - action: utter_procesos_participativos

 - rule: define_decidim
   steps: 
   - intent: decidim
   - action: utter_decidim





 - rule: ask for components in participative process
   steps:
   - or:
     - intent: debate_in_participatory_process
     - intent: meeting_in_participatory_process
     - intent: proposals_in_participatory_process
     - intent: budgets_in_participatory_process
   - action: action_mirar_en_proceso_participativo


 - rule: offer neighbor
   steps:
   - action: utter_suggest_location
   - intent: give_neighborhood
   - action: action_procesos_participativos
  


  
   
#  - rule: demo
#    steps: 
#    - intent: demo
#    - action: "action_show_context_and_id"
# #  - action: "action_go_to_page"
# #  - action: "action_picker"
# #  - action: "action_yes_no"



