version: '3.1'

rules:
 - rule: NLU FALLBACK
   steps:
   - intent: nlu_fallback
   - action: action_two_stage_fallback
   - active_loop: action_two_stage_fallback

 - rule: give_id
   steps:
   - intent: change_context
   - action: action_show_context_and_id

 - rule: welcome
   steps:
   - intent: greet
   - action: utter_greet

 - rule: farewell
   steps:
   - intent: farewell
   - action: utter_farewell

 - rule: thank u
   steps:
   - intent: thanks
   - action: utter_yourwelcome

 - rule: the user doesnt know what decidim is
   steps:
   - intent: whereami
   - action: utter_inform
   - action: utter_discoverability
   
 - rule: discoverability Extended
   steps:
   - intent: discoverability_extended
   - action: utter_discoverability_extended

 - rule: discoverability Conceptos
   steps:
   - intent: discoverability_conceptos
   - action: utter_discoverability_conceptos

 - rule: discoverability signIn
   steps:
   - intent: signIn
   - action: utter_signIn

 - rule: quien_puede_participar
   steps:
   - intent: quien_puede_participar
   - action: utter_quien_puede_participar
   - action: utter_offer_proceso_participativo

 - rule: como_puedo_participar
   steps:
   - intent: como_puedo_participar
   - action: utter_como_puedo_participar
   - action: utter_offer_proceso_participativo

#  - rule: give_neighborhood
#    steps:
#    - intent: give_neighborhood
#    - action: action_validar_neighbor




#  - rule: neighborhood
#    steps: 
#    - intent: give_neighborhood
#    - action: action_return_debates

 - rule: define_comentarios
   steps: 
   - intent: comentarios
   - action: utter_comentarios

#  - rule: quien_puede_participar
#    steps: 
#    - intent: quien_puede_participar
#    - action: utter_quien_puede_participar

#  - rule: como_puedo_participar
#    steps: 
#    - intent: como_puedo_participar
#    - action: utter_como_puedo_participar

 - rule: define_consejo_de_barrio
   steps: 
   - intent: consejo_de_barrio
   - action: utter_consejo_de_barrio
 - rule: define_presupuesto
   steps: 
   - intent: presupuesto
   - action: utter_presupuesto
 - rule: define_propuestas
   steps: 
   - intent: propuestas
   - action: utter_propuestas
 - rule: define_encuentros
   steps: 
   - intent: encuentros
   - action: utter_encuentros
 - rule: define_debate
   steps: 
   - intent: debate
   - action: utter_debate

#  - rule: define_votacion
#    steps: 
#    - intent: votacion
#    - action: utter_votacion
#  - rule: define_iniciar_sesion
#    steps: 
#    - intent: iniciar_sesion
#    - action: utter_iniciar_sesion
#  - rule: define_registrar
#    steps: 
#    - intent: registrar
#    - action: utter_registrar
 - rule: define_iniciativas_ciudadanas
   steps: 
   - intent: iniciativas_ciudadanas
   - action: utter_iniciativas_ciudadanas
 - rule: define_organos_de_participacion
   steps: 
   - intent: organos_de_participacion
   - action: utter_organos_de_participacion
 - rule: define_procesos_participativos
   steps: 
   - intent: procesos_participativos
   - action: utter_procesos_participativos

#  - rule: location and validation
#    steps: 
#    - intent: give_neighborhood
#    - action: action_validar_neighbor

#  - rule: devolver proceso participativo
#    steps:
#    - intent: retrieve_proceso_participativo
#    - action: action_procesos_participativos

 - rule: debate in participative process
   steps:
   - intent: debate_in_participatory_process
   - action: action_mirar_en_proceso_participativo

 - rule: ask for components in participative process
   steps:
   - or:
     - intent: debate_in_participatory_process
     - intent: meeting_in_participatory_process
     - intent: proposals_in_participatory_process
     - intent: budgets_in_participatory_process
   - action: action_mirar_en_proceso_participativo




#  - rule: Activate Location Form
#    steps:
#    - intent: give_neighborhood
#    - action: simple_location_form
#    - active_loop: simple_location_form

#  - rule: Submit Location Form
#    condition:
#    - active_loop: simple_location_form
#    steps:
#    - action: simple_location_form
#    - active_loop: null
#    - slot_was_set:
#      - requested_slot: null
#    - action: utter_submit
#    - action: utter_neighborhood_location_slots

#  - rule: PP with location
#    steps:
#    - intent: retrieve_proceso_participativo_location
#    - action: action_procesos_participativos_location
#  - rule: Debate with location
#    steps:
#    - intent: retrieve_debates_location
#    - action: action_debate_location
#  - rule: Survey with location
#    steps:
#    - intent: retrieve_surveys_location
#    - action: action_surveys_location
#  - rule: Budget with location
#    steps:
#    - intent: retrieve_budgets_location
#    - action: action_budget_location
#  - rule: Proposal with location
#    steps:
#    - intent: retrieve_proposals_location
#    - action: action_proposal_location
   
   
   
#  - rule: demo
#    steps: 
#    - intent: demo
#     #  - action: "action_return_debates"
#    - action: "action_go_to_page"
# #    - action: "action_picker"
# #    - action: "action_yes_no"



