version: '3.1'

stories:

# GREET
 - story: greet and discoverability
   steps:
   - intent: greet
   - action: utter_greet
   - intent: discoverability
   - action: utter_discoverability

 - story: greet and discoverability2
   steps:
   - intent: greet
   - action: utter_greet
   - intent: quien_eres
   - action: utter_quien_eres
   - intent: discoverability
   - action: utter_discoverability

#  - story: greet and sign_in
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: whereami
#    - action: utter_inform
#    - action: utter_discoverability
#    - intent: sign_in
#    - action: action_go_to_sign_in

# # STORIES PP
#  - story: greet and return PP
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: whereami
#    - action: utter_inform
#    - action: utter_discoverability
#    - intent: retrieve_proceso_participativo
#    - action: utter_wait
#    - action: action_latest_procesos_participativos

#  - story: greet and return PP 2
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: discoverability
#    - action: utter_discoverability
#    - intent: retrieve_proceso_participativo
#    - action: utter_wait
#    - action: action_latest_procesos_participativos

#  - story: greet and return PP 3
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: retrieve_proceso_participativo
#    - action: utter_wait
#    - action: action_latest_procesos_participativos

# # STORIES DEBATE
#  - story: greet and return debate
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: whereami
#    - action: utter_inform
#    - action: utter_discoverability
#    - intent: retrieve_debates
#    - action: utter_wait
#    - action: action_latest_Debate

   
#  - story: greet and return debate 2
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: discoverability
#    - action: utter_discoverability
#    - intent: retrieve_debates
#    - action: utter_wait
#    - action: action_latest_Debate

   
#  - story: greet and return debate 3
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: retrieve_debates
#    - action: utter_wait
#    - action: action_latest_Debate

# # STORIES SURVEY
#  - story: greet and return survey
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: whereami
#    - action: utter_inform
#    - action: utter_discoverability
#    - intent: retrieve_surveys
#    - action: utter_wait
#    - action: action_latest_Survey

#  - story: greet and return survey 2
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: discoverability
#    - action: utter_discoverability
#    - intent: retrieve_surveys
#    - action: utter_wait
#    - action: action_latest_Survey

#  - story: greet and return survey 3
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: retrieve_surveys
#    - action: utter_wait
#    - action: action_latest_Survey

# # STORIES BUDGET
#  - story: greet and return budget
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: whereami
#    - action: utter_inform
#    - action: utter_discoverability
#    - intent: retrieve_budgets
#    - action: utter_wait
#    - action: action_latest_Budget
   
#  - story: greet and return budget 2
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: discoverability
#    - action: utter_discoverability
#    - intent: retrieve_budgets
#    - action: utter_wait
#    - action: action_latest_Budget
   
#  - story: greet and return budget 3
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: retrieve_budgets
#    - action: utter_wait
#    - action: action_latest_Budget

# # STORIES PROPOSAL
#  - story: greet and return proposal
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: whereami
#    - action: utter_inform
#    - action: utter_discoverability
#    - intent: retrieve_proposals
#    - action: utter_wait
#    - action: action_latest_Proposal
   
#  - story: greet and return proposal 2
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: discoverability
#    - action: utter_discoverability
#    - intent: retrieve_proposals
#    - action: utter_wait
#    - action: action_latest_Proposal
   
#  - story: greet and return proposal 3
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: retrieve_proposals
#    - action: utter_wait
#    - action: action_latest_Proposal




#   # - story: greet and inform
#   #  steps:
#   #  - intent: soy de barcelona
#   #  - action: te interesaria ver meetings de barcelona?
#   #  - intent: si
#   #  - action: aqui tienes 



#   # pide un proceso/debate/survey etc..
#   # miro si tiene el neighbour en not null
#   #   - si no es null busco de esa zona

#   #   - si es null
#   #     - le pregunto si me quiere dar el barrio
#   #       - me dice que si 
#   #         - entro en un form para pedir el barrio
#   #         - le doy un PP de esa zona si hay
#   #       - me dice que no
#   #         - busco de una zona cualquiera 


# STORIES NEIGHBOR
 - story: keep neighbor
   steps:
   - intent: greet
   - action: utter_greet
   - intent: give_neighborhood
   - action: action_validar_neighbor
   - intent: give_neighborhood
   - slot_was_set:
     - neighborhood_location: Horta
   - action: action_validar_neighbor





# OTHERS


 - story: User not logged
   steps:
   - intent: inciate_conv
   - slot_was_set:
     - user_logged: LOGGED
   - action: utter_welcome_back



 - story: First message and quien puede participar
   steps:
   - intent: inciate_conv
   - slot_was_set:
     - user_logged: NOT_LOGGED
   - action: utter_greet_and_ask_name
   - intent: give_name
  #  - slot_was_set:
  #    - user_name: Victor
   - action: utter_discoverability
   - intent: quien_puede_participar
   - action: utter_quien_puede_participar
   - action: utter_offer_proceso_participativo
   - intent: affirm
  #  - action: utter_suggest_location
  #  - intent: give_neighborhood
   - action: action_procesos_participativos

#  - story: First message and quien puede participar SAD PATH
#    steps:
#    - intent: inciate_conv
#    - slot_was_set:
#      - user_logged: LOGGED
#    - action: utter_greet_and_ask_name
#    - intent: give_name
#    - action: utter_discoverability
#    - intent: quien_puede_participar
#    - action: utter_quien_puede_participar
#    - action: utter_offer_proceso_participativo
#    - intent: deny
#    - action: utter_farewell

 - story: First message and como puedo participar
   steps:
   - intent: inciate_conv
   - slot_was_set:
     - user_logged: NOT_LOGGED
   - action: utter_greet_and_ask_name
   - intent: give_name
  #  - slot_was_set:
  #    - user_name: Victor
   - action: utter_discoverability
   - intent: como_puedo_participar
   - action: utter_como_puedo_participar
   - action: utter_offer_proceso_participativo
   - intent: affirm
  #  - action: utter_suggest_location
  #  - intent: give_neighborhood
   - action: action_procesos_participativos

#  - story: First message and como puedo participar SAD PATH
#    steps:
#    - intent: inciate_conv
#    - slot_was_set:
#      - user_logged: LOGGED
#    - action: utter_greet_and_ask_name
#    - intent: give_name
#   #  - slot_was_set:
#   #    - user_name: Victor
#    - action: utter_discoverability
#    - intent: como_puedo_participar
#    - action: utter_como_puedo_participar
#    - action: utter_offer_proceso_participativo
#    - intent: deny
#    - action: utter_farewell

   
 - story: First message and discoverability path 3
   steps:
   - intent: inciate_conv
   - slot_was_set:
     - user_logged: NOT_LOGGED
   - action: utter_greet_and_ask_name
   - intent: give_name
  #  - slot_was_set:
  #    - user_name: Victor
   - action: utter_discoverability
   - intent: decidim
   - action: utter_decidim



#  - story: First message and discoverability
#    steps:
#    - intent: inciate_conv
#    - action: utter_greet_and_ask_name
#    - intent: give_name
#    - slot_was_set:
#      - user_name: Victor
#    - action: utter_discoverability
#    - checkpoint: check_utter_discoverability

   
#  - story: Discoverability path 1
#    steps:
#    - checkpoint: check_utter_discoverability
#    - intent: quien_puede_participar
#    - action: utter_quien_puede_participar
#    - action: utter_offer_proceso_participativo
#    - intent: affirm
#    - action: action_procesos_participativos

      
#  - story: Discoverability path 2
#    steps:
#    - checkpoint: check_utter_discoverability
#    - intent: como_puedo_participar
#    - action: utter_como_puedo_participar
#    - action: utter_offer_proceso_participativo
#    - intent: affirm
#    - action: action_procesos_participativos

      
#  - story: Discoverability path 3
#    steps:
#    - checkpoint: check_utter_discoverability
#    - intent: decidim
#    - action: utter_decidim






#  - story: change neighbor
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: give_neighborhood
#      entities:
#      - neighborhood_location: Horta
#    - action: action_validar_neighbor
#    - slot_was_set:
#      - neighborhood_location: Horta
#    - intent: give_neighborhood
#      entities:
#      - neighborhood_location: Sants
#    - action: action_validar_neighbor
#    - slot_was_set:
#      - new_neighborhood_location: Sants
#    - intent: affirm
#    - action: action_change_neighbor
#    - slot_was_set:
#      - neighborhood_location: Sants


#  - story: dont change neighbor
#    steps:
#    - intent: greet
#    - action: utter_greet
#    - intent: give_neighborhood
#      entities:
#      - neighborhood_location: Horta
#    - action: action_validar_neighbor
#    - slot_was_set:
#      - neighborhood_location: Horta
#    - intent: give_neighborhood
#      entities:
#      - neighborhood_location: Sants
#    - action: action_validar_neighbor
#    - slot_was_set:
#      - new_neighborhood_location: Sants
#    - intent: deny

# STORES PARTICIPATIVE PROCESS
 - story: ask for PP
   steps:
   - intent: greet
   - action: utter_greet
   - intent: retrieve_proceso_participativo
   - slot_was_set:
     - actual_slug_PP: neighborhood_location
   - action: action_procesos_participativos
   - slot_was_set:
     - actual_slug_PP: cuidemhortaguinardo


 - story: ask for PP wrong first
   steps:
   - intent: greet
   - action: utter_greet
   - intent: retrieve_proceso_participativo
     entities:
     - neighborhood_location: Virrei Amat
   - action: action_procesos_participativos
   - intent: retrieve_proceso_participativo
     entities:
     - neighborhood_location: Horta
   - action: action_procesos_participativos
   - slot_was_set:
     - actual_slug_PP: cuidemhortaguinardo

 - story: ask for PP and ask for components in PP
   steps:
   - intent: greet
   - action: utter_greet
   - intent: discoverability
   - action: utter_discoverability
   - intent: retrieve_proceso_participativo
     entities:
     - neighborhood_location: Horta
   - action: action_procesos_participativos
   - slot_was_set:
     - actual_slug_PP: interiorsdillaGuineueta
   - intent: debate_in_participatory_process
   - action: action_mirar_en_proceso_participativo
   - intent: proposals_in_participatory_process
   - action: action_mirar_en_proceso_participativo
   - intent: meeting_in_participatory_process
   - action: action_mirar_en_proceso_participativo


